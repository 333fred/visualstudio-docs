---
title: "MSB8040: "
description: "This error occurs when ."
ms.date: "03/30/2021"
ms.topic: "error-reference"
f1_keywords:
 - MSB8040
dev_langs:
  - "C++"
author: ghogen
ms.author: ghogen
manager: jmartens
ms.workload:
  - "multiple"
---
# MSB8040: Spectre-mitigated libraries are required for this project

This error occurs when the Spectre libraries are not installed, or the right compiler option [/Qspectre](/cpp/build/reference/qspectre) was not used.

To fix the error, make sure that the right MFC library version is installed. In the Visual Studio Installer, choose **Modify** and then choose **Individual Components** and choose **C++ MFC for latest v142 build tools with Spectre Mitigations** (or the appropriate version for your toolset) for your target platform architecture.

If you have the library installed, make sure that you are using the `/Qspectre` compiler option. To set this property in the Visual Studio IDE, open **Properties** for your projects, and in the **Configuration Properties** > **C/C++** > **Code Generation** property page, set the **Spectre Mitigations** property to **Enabled**, or **All loads** for [/Qspectre-load](/cpp/build/reference/qspectre-load), or **All Control Flow Loads** for [/Qspectre-load-cf](/cpp/build/reference/qspectre-load-cf).

## See also

[Spectre mitigations in MFC](https://devblogs.microsoft.com/cppblog/spectre-mitigations-in-msvc/)
[StackOverflow: MSB8040](https://stackoverflow.com/questions/59479631/error-msb8040-spectre-mitigated-libraries-are-required-for-this-project)
